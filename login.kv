#: import validate_student login.validate_student
#: import validate_teacher login.validate_teacher
#: import generate_students classroom.generate_students
#: import load_books library.load_books

MDScreen:
    name : "login"
    md_bg_color : 202/255, 150/255, 92/255, .6

    canvas:
        Color:
            rgba : 1, 1, 1, .7
        Rectangle:
            size : self.size
            pos : self.pos
            source : "images/back.jpg"

    MDCard:
        md_bg_color : 133/255, 0, 0, 1
        elevation: 3
        size_hint : 1, .18
        radius : [0, 0, 15, 15]
        pos_hint : {"center_x" : .5, "center_y" : .92}
        MDFloatLayout:
            FitImage:
                size_hint : .15, .65
                radius : [50]
                pos_hint : {"center_x" : .1, "center_y" : .5}
                source : "images/log.png"
            MDLabel:
                text: "Adnan's Institute of WitchCraft"
                halign : "center"
                font_size : "22sp"
                pos_hint : {"center_x" : .56, "center_y" : .5}
                font_name : "fonts/Poppins-Bold.ttf"
                theme_text_color : "Custom"
                text_color : 1, 1, 1, 1

    MDFloatLayout:
        pos_hint : {"center_y" : .36}
        MDLabel:
            text : "Login"
            font_size : "40sp"
            halign : "center"
            pos_hint : {"center_x" : .24, "center_y" : .84}
            font_name : "fonts/Poppins-Bold.ttf"
        FitImage:
            size_hint : .25, .17
            pos_hint : {"center_x" : .73, "center_y" : .84}
            source : "images/log.png"

        MDLabel:
            text : "E-Mail"
            font_size : "17sp"
            halign : "center"
            pos_hint : {"center_x" : .19, "center_y" : .71}
            font_name : "fonts/Poppins-SemiBold.ttf"
        MDTextField:
            id : email
            mode : "rectangle"
            hint_text : "E-Mail"
            font_size : "12sp"
            size_hint : .6, .08
            pos_hint : {"center_x" : .44, "center_y" : .65}
            font_name : "fonts/Poppins-Bold.ttf"
            theme_text_color : "Custom"
            line_color_normal : "black"
            text_color_focus : "black"
            text_color_normal : "black"

        MDLabel:
            text : "Password"
            font_size : "17sp"
            halign : "center"
            pos_hint : {"center_x" : .22, "center_y" : .57}
            font_name : "fonts/Poppins-SemiBold.ttf"
        MDTextField:
            id : password
            mode : "rectangle"
            hint_text : "Password"
            font_size : "12sp"
            size_hint : .6, .08
            pos_hint : {"center_x" : .44, "center_y" : .51}
            font_name : "fonts/Poppins-Bold.ttf"
            line_color_normal : "black"
            text_color_focus : "black"
            text_color_normal : "black"

        MDIconButton:
            icon: "eye-off"
            pos_hint: {"center_x" : .67, "center_y": .505}
            pos: password.width - self.width + dp(8), 0
            theme_text_color: "Hint"
            on_release:
                self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                password.password = False if password.password is True else True

        MDFillRoundFlatButton:
            text : "Login as Student"
            size_hint : .35, .07
            pos_hint : {"center_x" : .3, "center_y" : .4}
            md_bg_color :  0, 0, 0, .5
            text_color : "orange"
            on_press :
                validate_student(app, email, password)
                generate_students(app)
                load_books(app)

        MDFillRoundFlatButton:
            text : "Login as Teacher"
            size_hint : .35, .07
            pos_hint : {"center_x" : .68, "center_y" : .4}
            md_bg_color :  0, 0, 0, .5
            text_color : "orange"
            on_press : validate_teacher(app, email, password)

        MDTextButton:
            text : "Not a student? Fill the admission form"
            font_size : "14sp"
            font_name : "fonts/Poppins-SemiBold.ttf"
            pos_hint : {"center_x" : .41, "center_y" : .33}
            on_press : root.manager.current = "admission_form"

    MDCard:
        size_hint : 1, .15
        pos_hint : {"center_x" : .5, "center_y" : .05}
        radius : [10, 10, 0, 0]
        md_bg_color : 0, 0, 0, 1
        MDFloatLayout:
            MDIconButton:
                icon : "copyright"
                icon_size : "32dp"
                pos_hint : {"center_x" : .25, "center_y" : .55}
                theme_text_color : "Custom"
                text_color : 1, 1, 1, 1
            MDLabel:
                text : "An app by Adnan"
                font_size : "22sp"
                halign : "center"
                theme_text_color : "Custom"
                text_color : 1, 1, 1, 1
                pos_hint : {"center_x" : .52, "center_y" : .55}
                font_name : "fonts/Poppins-Bold.ttf"

